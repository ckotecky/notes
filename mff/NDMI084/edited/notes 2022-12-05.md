2022-12-05
PÅ™ednÃ¡Å¡ka #10
-------------


PARALELNÃ ALGORITMY
===================


Df: PRAM model
--------------
- vÃ­ce procesorÅ¯
	+ majÃ­ pÅ™Ã­stup ke spoleÄnÃ© pamÄ›Å¥i
	+ pracujÃ­ synchronnÄ›
	+ znajÃ­ svÅ¯j Äas
	+ majÃ­ stejnÃ© operace

- mÄ›Å™Ã­me:
	+ Äas
		- chceme logaritmickÃ½
		- reÃ¡lnÄ› oÄekÃ¡vÃ¡me polynomiÃ¡lnÃ­
	+ poÄet procesorÅ¯
		- chceme polynomiÃ¡lnÃ­

1. procesory majÃ­ ÄÃ­sla
	- seÄÃ­st je umÃ­me v logaritmickÃ©m ÄÃ­sle
	
2. nebo majÃ­ prefix sum
	- ÄÃ­slo procesoru sÄÃ­tÃ¡ pÅ™edeÅ¡lÃ¡ ÄÃ­sla
	- spoÄÃ­tÃ¡me v logaritmickÃ©m Äase
		- v logaritmickÃ©m stromu sÄÃ­tancÅ¯ pak jdeme zpÃ¡tky k listÅ¯m (procesorÅ¯m) a pÅ™iÄteme jejich ÄÃ­slo k ÄÃ­slu rodiÄe

Df: DÄ›lÃ­cÃ­ model
----------------
- implemetace simultÃ¡lnÃ­ch ÄtenÃ­ / zÃ¡pisÅ¯
- simultÃ¡lnÃ­ zÃ¡pis nebo ÄtenÃ­ vÃ­ce procesorÅ¯ do stejnÃ© buÅˆky pamÄ›ti
	- nezÃ¡leÅ¾Ã­ na implementaci



Pb: MaximÃ¡lnÃ­ nezÃ¡vislÃ¡ mnoÅ¾ina (Maximal independent set - MIS)
---------------------------------------------------------------
- sekvenÄnÄ› jednoduchÃ©
	- vybereme vrchol, vyÅ¡krtÃ¡me sousedy, pokraÄujeme..
- graf mÅ¯Å¾e reprezentovat konflikty mezi procesy apod.
- nelze jednoduÅ¡e aproximovat, Å¡patnÃ½ aproximaÄnÃ­ pomÄ›r


Alg: paralelizace
-----------------
1. vybereme nezÃ¡vislou mnoÅ¾inu
2. sousedy vyÅ¡krtÃ¡me
3. chceme graf rychle zmenÅ¡ovat v kaÅ¾dÃ©m kroku (ideÃ¡lnÄ› tÅ™eba na polovinu)


Df: ZnaÄenÃ­
-----------
- `dv :=` aktuÃ¡lnÃ­ stupeÅˆ vrcholu `v`


Alg: MaximÃ¡lnÃ­ nezÃ¡vislÃ¡ mnoÅ¾ina
--------------------------------
1. Vstup: `G = (V, E)`

1. `I := âˆ…`
3. `âˆ€v âˆˆ V` paralelnÄ›:
4. 		Pokud `dv = 0`
5.   		`I = I âˆª {v}`
6.     		`V = V \ {v}`
2. Opakujeme dokud graf nenÃ­ prÃ¡zdnÃ½:
7. 		`âˆ€v âˆˆ V` paralelnÄ›:
8. 			NezÃ¡visle s pravdÄ›podobnostÃ­ `pv = 1 / 2dv` oznaÄÃ­me vrchol v
9. 		`âˆ€ {uv} âˆˆ E`:
10. 		Pokud `u` i `v` jsou oznaÄenÃ©:
12.  			SmaÅ¾eme znaÄku vrcholu niÅ¾Å¡Ã­ho stupnÄ›
13. 	`S :=` oznaÄenÃ© vrcholy
14. 	`N(S) :=` sousedi oznaÄenÃ½ch vrcholÅ¯
15. 	`E = {{uv} âˆˆ E: {uv} âˆ‰ S âˆ§ {uv} âˆ‰ N(S)}`
16. 	`V = V \ (S âˆª N(S))`
17. 	`I = I âˆª S`
18. VrÃ¡tÃ­me `I`



Pz:
---
1. potÅ™ebujeme polynomiÃ¡lnÄ› procesorÅ¯
2. potÅ™ebujeme poly-logaritmickÃ½ Äas na cyklus
3. vÃ½sledek je maximÃ¡lnÃ­ nezÃ¡vislÃ¡ mnoÅ¾ina


Pz: Volba parametru `pv`
------------------------
1. `Kn`
	- chceme vybrat prÃ¡vÄ› jeden, nebo nejvÃ½Å¡ dva vrcholy
	- `1/n`
2. PÃ¡rovÃ¡nÃ­
	- `1/2` nebo nÄ›jakou konstantu
- proto `1 / 2dv`


Pz:
---
- nechÅ¥ vrchol `v` je oznaÄenÃ½
- `P[v âˆˆ S po kroku 12] â‰¥ 1/2`

### DÅ¯kaz:
+ vrchol ztratÃ­ znaÄku, pokud je oznaÄenÃ½ soused vyÅ¡Å¡Ã­ho stupnÄ›
+ pravdÄ›podobnosti `1/2dv` povaÅ¾ujeme za nezÃ¡vislÃ©
- `P[`oznaÄÃ­me v`]  â‰¤  Î£_{w: vw âˆˆ E, dw â‰¥ dv} pw  â‰¤  Î£ 1/2dv  â‰¤  dv * 1/2dv  =  1/2`


Df: DobrÃ½ a Å¡patnÃ½ vrchol
-------------------------
1. vrchol `v` je "dobrÃ½", pokud mÃ¡ `â‰¥ dv/3` sousedÅ¯ stupnÄ› `â‰¤ dv`
2. jinak je Å¡patnÃ½


Df: DobrÃ¡ a Å¡patnÃ¡ hrana
------------------------
1. hrana `{uv}` je dobrÃ¡, pokud je `u` nebo `v` dobrÃ½
2. jinak je Å¡patnÃ¡


Pz:
---
- `v` je dobrÃ½  `=>  p = P[`v 8 oznaÄÃ­m aspoÅˆ jednoho souseda`] â‰¥ Î² > 0.15`

### DÅ¯kaz:
- `p  â‰¥  1 - Ï€{w âˆˆ N(v)} (1 - 1/2dw)  â‰¥  1 - Ï€{w âˆˆ N(v): dw â‰¤ dv} (1 - 1/2dw) â‰¥ 1 - (1 - 1/2dv)^{dv/3}  â‰¥  1 - e^{-1/6}  =  Î²`
	- otoÄenÃ­ pravdÄ›podobnosti a smazÃ¡nÃ­ `1 -` se to asi zpÅ™ehlednÃ­
	

Pz:
---
- hvÄ›zda mÃ¡ mÃ¡lo dobrÃ½ch vrcholÅ¯ - dobrÃ½ je jen prostÅ™ednÃ­


Lm: 
---
- `|\{e âˆˆ E: Â¶e je dobrÃ¡Â¶\}| â‰¥ |E|/2`

### DÅ¯kaz:
- zorientujeme hrany `{u,v} -> (u,v): du â‰¤ dv`
- buÄ `v` Å¡patnÃ½ vrchol
- hran orientovanÃ½ch do nÄ›j `< dv/3` z definice Å¡patnÃ©ho vrcholu
- hran orientovanÃ½ch ven je `> 2dv/3`
- kaÅ¾dÃ© (Å¡patnÃ©) vstupujÃ­cÃ­ hranÄ› pÅ™iÅ™adÃ­me dvÄ› vystupujÃ­cÃ­ hrany "pomocnÃ½mi hranami"
- pro kaÅ¾dou Å¡patnou hranu mÃ¡me aspoÅˆ dvÄ› dobrÃ©?


Vt: SloÅ¾itost
-------------
- `ğ”¼[`# cyklÅ¯`] â‰¤ O(log m)`

### DÅ¯kaz:
- `Ei` hrany po `i` cyklech
- polovina hran je dobrÃ½ch
- kaÅ¾dÃ¡ dobrÃ¡ hrana zmizÃ­ s pravdÄ›podobnostÃ­ aspoÅˆ `Î²/2`
- v prÅ¯mÄ›ru zmizÃ­ `Î²/4` ÄÃ¡st hran
- `ğ”¼[E{i + 1}] â‰¤ (1 - Î²/4) * |Ei|`
- `ğ”¼[|Ei| â‰¤ (1 - Î²/4)^i * |E|`
- `=> ğ”¼[`# cyklÅ¯`] â‰¤ O(log m)`


Alg: Alternativa
----------------
- vrcholy oznaÄÃ­me s pravdÄ›podobnostÃ­ `pv` ale ne nezÃ¡visle, jen po dvou nezÃ¡visle
- pozorovÃ¡nÃ­ stÃ¡le platÃ­ i pro dvou-nezÃ¡vislost, kromÄ› poslednÃ­ho dokÃ¡zanÃ©ho, musÃ­me dokÃ¡zat znova


Pz:
---
- `v` je dobrÃ½  `=>  p = P[`v 8 oznaÄÃ­m aspoÅˆ jednoho souseda`] â‰¥ Î² > 0.15`

### DÅ¯kaz:
- `D := {w: w âˆˆ N(v), dw â‰¤ dv}`
- jev `Aw :=` oznaÄÃ­me `w âˆˆ D`
- `P[âˆª Aw] = 1 - Ï€{w âˆˆ D} (1 - pw) = Î£ pw - Î£ pw * pw' - ...`
	+ produkt je pro nezÃ¡vislÃ©
	+ mÅ¯Å¾eme vyuÅ¾Ã­t jen prvnÃ­ dva sÄÃ­tance, ostatnÃ­ neplatÃ­
- z inkluze exkluze `|âˆª Aw| â‰¥ Î£|Aw| - Î£|Aw âˆ© Aw'|` platÃ­ i pro po dvou nezÃ¡vislÃ©
- `P[Aw] â‰¥ Î£{w âˆˆ D} pw - 1/2 Î£{w,w' âˆˆ D: w â‰  w'} pw * pw'`
	+ bez podmÃ­nky `w â‰  w'` se vÃ½sledek zmenÅ¡Ã­, poÄÃ­tÃ¡nÃ­ se zjednoduÅ¡Ã­
- `â‰¥ Î£{w âˆˆ D} pw (1 - 1/2 Î£{w' âˆˆ D} pw') â‰¥?â‰¥ Î²'`
1. `|D| â‰¤ 2` - platÃ­ poÄty pro obecnou zÃ¡vislost
2. `|D| â‰¥ 3`
	- `Î£{w âˆˆ D} pw â‰¥ 1/6`
		+ viz `1 - e^{-1/6}  =  Î²`
	- `D' âŠ† D: Î£_{w âˆˆ D'} pw â‰¥ 1/6`, `D'` je minimÃ¡lnÃ­ do inkluze
	- `|D| â‰¥ 3  =>  Î£_{w âˆˆ D'} pw â‰¤ 1/4`
		+ rozmyslet doma
		+ je tam ÄÃ­slo menÅ¡Ã­, neÅ¾ `1/12`, kterÃ© nemÅ¯Å¾eme vyhodit
	- `Î²' = 1/6 * (1 - 1/6) = 1/8 = 0.125`